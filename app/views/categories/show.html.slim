.categories_list.m-3
  h1.text-center.mb-3 = @category.name
  - @child_categories.each do |child_category|
    a.col-sm-4.btn.category-btn id="#{@category.rakuten_id}-#{child_category.rakuten_id}" =child_category.name

.recipe_list
  ul#recipe_list.mt-2

javascript:
  window.onload = function(){
    var child_categories = #{raw @child_categories.to_json};
    for(var i = 0; i < child_categories.length; ++i) {
      var category_code = 31 + "-" + child_categories[i].rakuten_id;
      document.getElementById(category_code).onclick = function() {
        GetRakutenApi('https://app.rakuten.co.jp/services/api/Recipe/CategoryRanking/20170426?applicationId=1018227086092671411&categoryId=' + category_code);
      }
    }
  }

  function GetRakutenApi(url) {
    document.getElementById('recipe_list').innerHTML = '';
    function updateText(data) {
        for (let i = 0; i < data.length; i++) {
            const insertHtml = `
            <div class="cp_card02">
                <div class="photo photo1">
                    <a href="${data[i].recipeUrl}" target="_blank">
                        <img src="${data[i].foodImageUrl}" alt="${data[i].recipeTitle} 画像">
                    </a>
                </div>
                    <div class="description">
                        <h5>${data[i].recipeTitle}</h5>
                        <p>${data[i].recipeMaterial}</p>
                        <a class="btn link-btn" rel="nofollow" data-method="post" href="/recipes/scrape?url=${data[i].recipeUrl}">材料費をみる</a>
                    </div>
                </div>
            </div>
            `;
            $('#recipe_list').append(insertHtml);
        }
    }

    // API取得
    $.getJSON(url, (data) => {
        const recipes = data.result;
        updateText(recipes);
    });
  }